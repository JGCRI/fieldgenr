<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read ESM precipitation data — read.precipitations • fldgen</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read ESM precipitation data — read.precipitations" />
<meta property="og:description" content="The precipitation data should be a netCDF file of average annual grid values.
The data is assumed to have its dimensions of time, lat, lon, where lon is
the most rapidly varying index, and time is the least." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fldgen</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tutorial1.html">Fldgen v1 Tutorial - Temperatures only</a>
    </li>
    <li>
      <a href="../articles/tutorial2.html">Fldgen v2 Tutorial - Joint Temperature and Precipitation emulation and function how to</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read ESM precipitation data</h1>
    
    <div class="hidden name"><code>read.precipitations.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The precipitation data should be a netCDF file of average annual grid values.
The data is assumed to have its dimensions of time, lat, lon, where lon is
the most rapidly varying index, and time is the least.</p>
    </div>

    <pre class="usage"><span class='fu'>read.precipitations</span>(
  <span class='no'>filename</span>,
  <span class='kw'>len</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>tag</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span>(<span class='no'>filename</span>),
  <span class='kw'>varname</span> <span class='kw'>=</span> <span class='st'>"pr"</span>,
  <span class='kw'>latvar</span> <span class='kw'>=</span> <span class='st'>"lat"</span>,
  <span class='kw'>lonvar</span> <span class='kw'>=</span> <span class='st'>"lon"</span>,
  <span class='kw'>timevar</span> <span class='kw'>=</span> <span class='st'>"time"</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>filename</th>
      <td><p>Name of the input netCDF file</p></td>
    </tr>
    <tr>
      <th>len</th>
      <td><p>Maximum length of the time series to read.  If the data read is
longer, it will be trimmed.  (Default: read entire time series, regardless of
length.)</p></td>
    </tr>
    <tr>
      <th>tag</th>
      <td><p>A string identifying the name of the scenario.  If omitted, the
tag will default to the filename.</p></td>
    </tr>
    <tr>
      <th>varname</th>
      <td><p>Name of the variable to read from the netcdf file.
Irrespective of the name in the netcdf file, it will be called 'tas' in the
return data.</p></td>
    </tr>
    <tr>
      <th>latvar</th>
      <td><p>Name of the latitude dimension variable in the input file.</p></td>
    </tr>
    <tr>
      <th>lonvar</th>
      <td><p>Name of the longitude dimension variable in the input file.</p></td>
    </tr>
    <tr>
      <th>timevar</th>
      <td><p>Name of the time dimension variable in the input file.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>griddata</code> list (see details).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The output will be a list with six fields:</p><dl'>
  <dt><strong>pr</strong></dt><dd><p>Matrix of precipitation data.</p></dd>
  <dt><strong>pgop</strong></dt><dd><p>Vector operator for global mean precipitation.</p></dd>
  <dt><strong>lat</strong></dt><dd><p>Vector of latitude values.  These are only replicated
once, so their length is nlat, not ngrid.  You have to use <code><a href='https://rdrr.io/r/base/rep.html'>rep(lat,
nlon)</a></code> to get latitudes for each grid cell.</p></dd>
  <dt><strong>lon</strong></dt><dd><p>Vector of longitude values.  These are only replicated
once, so their lingth is nlon, not ngrid.  Getting longitudes for each grid
cell is tricksy.  Try <code><a href='https://rdrr.io/r/base/vector.html'>as.vector(matrix(rep(lon, nlat), nrow=nlat,
byrow=TRUE))</a></code>.  Fortunately, you don't need them very often.</p></dd>
  <dt><strong>time</strong></dt><dd><p>Vector of time values, given as years since the base
year of the dataset.</p></dd>
  <dt><strong>tags</strong></dt><dd><p>A list of datasets that were concatenated to get this
structure.  The names of the list are the tags given to the dataset, and the
values are a vector of start-row, end-row pairs.</p></dd>

</dl>

<p>The data at each time is represented as a flattened vector of grid cells.
The flattening is performed by transposing to lat, lon ordering, so that lat
will be the most rapidly varying index (because R uses
Fortran-style indexing).  Then the spatial dimensions are discarded,
resulting in a 1D vector.  The time dimension is kept, resulting in a matrix
with years in rows and grid cells in columns.  The dimensions of the matrix
will be Nyear x Ngrid, where Nyear is the number of years in the data set,
and Ngrid is the number of grid cells.</p>
<p>The <code>pgop</code> vector is a vector whose dot product with a flattened grid is
the area-weighted global mean for the grid.  It is stored as a column vector,
so <code>pr %*% pgop</code> is the time series of global mean precipitations.</p>
<p>The lat and lon dimension variables from the input file  are also
stored in the structure.  These are primarily useful for writing out
generated grids as netCDF files.  The time dimension variable is converted to
integer years, starting at 0.</p>
<p>Conventionally, we refer to the output list as <code>griddata</code>.  Notably, any
other function with a <code>griddata</code> argument is expecting one of these
structures.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Robert Link, Abigail Snyder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


